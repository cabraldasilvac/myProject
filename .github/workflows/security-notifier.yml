name: Notificador de Alertas de Seguran√ßa

on:
  workflow_dispatch:
  dependabot_alert:
    types: [created, reopened]

jobs:
  enviar-notificacao-slack:
    runs-on: ubuntu-latest
    steps:
      - name: Notificar sobre Alerta do Dependabot
        if: github.event_name == 'dependabot_alert'
        uses: cabraldasilvac/security-alert-notifier-action@main
        with:
          slack-channel-id: "C099V8S4GDD"
          slack-message: |
            üö® *Novo Alerta de Seguran√ßa (Dependabot)*
            *Reposit√≥rio:* ${{ github.repository }}
            *Depend√™ncia:* `${{ github.event.alert.dependency.package.name }}`
            *Severidade:* `${{ github.event.alert.severity }}`
            *Link:* ${{ github.event.alert.html_url }}
        env:
          SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}

      - name: Notificar sobre Teste Manual
        if: github.event_name == 'workflow_dispatch'
        uses: cabraldasilvac/security-alert-notifier-action@main
        with:
          slack-channel-id: "C099V8S4GDD"
          slack-message: "‚úÖ Teste manual do notificador de seguran√ßa para o reposit√≥rio ${{ github.repository }}."
        env:
          SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}
